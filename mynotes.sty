% mynotes.sty - 我的个人笔记样式文件

% 0. 文件标识
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{mynotes}[2025/10/06 My Personal Notes Style]

% 1. 引入依赖的宏包 
\usepackage{newtxtext} % Times New Roman 字体
\usepackage[T1]{fontenc}
\usepackage[a4paper, top=2.54cm, bottom=2.54cm, left=1.91cm, right=1.91cm]{geometry}
\usepackage{lipsum} % 用于插入占位文本
\usepackage{abstract} % 用于更好地控制摘要环境
\usepackage{graphicx} % 插入图片的核心宏包
\usepackage{float} % 支持 [H] 浮动选项
\usepackage{subcaption} % 用于实现多图并排，是 subfigure 的现代化替代品
\usepackage{amsmath} % 公式环境
\usepackage{empheq}
\usepackage{tikz} % 绘图环境
\usetikzlibrary{arrows.meta}

% 引入 setspace 宏包,设置 1.5 倍行距
\RequirePackage{setspace}
\setstretch{1.5}

% 为引用增加颜色
\usepackage{xcolor}  % 必须在 hyperref 之前加载
\definecolor{lightblue}{rgb}{0.2, 0.4, 0.8} % 调整RGB值来获得喜欢的蓝色
\usepackage{hyperref} % 加载超链接宏包
\hypersetup{
    colorlinks=true,      % 将链接文字带颜色，而不是一个丑陋的方框
    linkcolor=blue,  % 内部链接的颜色 (公式, 图表, 章节)
    citecolor=green,      % 文献引用的颜色 (这里用绿色做区分)
    urlcolor=cyan,        % 网址链接的颜色
    linkbordercolor={1 1 1}, % 可选：去除链接周围的边框 (如果 colorlinks=false)
}
\renewcommand{\eqref}[1]{\hyperref[#1]{\textup{\tagform@{\ref*{#1}}}}}



% 2. 为封面页定义新的存储命令
\newcommand{\notetitle}[1]{\def\@notetitle{#1}}
\newcommand{\noteauthor}[1]{\def\@noteauthor{#1}}
\newcommand{\noteschool}[1]{\def\@noteschool{#1}}
\newcommand{\notecollaborator}[1]{\def\@notecollaborator{#1}}
\newcommand{\notecollabschool}[1]{\def\@notecollabschool{#1}}
\newcommand{\notedate}[1]{\def\@notedate{#1}}
\newcommand{\noteabstract}[1]{\def\@noteabstract{#1}}

% 3. 创建一个命令来生成封面页
\newcommand{\makenotetitle}{
    \begin{titlepage}
        \centering
        
        {\Huge \bfseries \@notetitle \par}
        \vspace{1.0cm}
        
        {\large \@noteauthor \par}
        {\normalsize \@noteschool \par}
        \vspace{1.0cm}
        
        {\large Collaborator: \par} % "Collaborator:" 文本硬编码在样式里
        {\large \@notecollaborator \par}
        {\normalsize \@notecollabschool \par}
        \vspace{1.0cm}
        
        {\large \@notedate \par}
        \vspace{1.0cm}
        
        \begin{abstract}
            \@noteabstract
        \end{abstract}
        
    \end{titlepage}
}

% 4. 自定义图片插入命令
    % 4.1. 单图插入命令 \insertsingleimage
    % 用法: \insertsingleimage{图片路径}{图片标题}{图片标签}
        \newcommand{\insertsingleimage}[3]{
            \begin{figure}[H]
                \centering
                \includegraphics[width=0.7\textwidth]{#1}
                \caption{#2}
                \label{#3}
            \end{figure}
        }
    % 4.2. 双图横排命令 \insertdoubleimage
    % 用法: \insertdoubleimage{图1路径}{图1标题}{图1标签}{图2路径}{图2标题}{图2标签}{总标题}{总标签}
        \newcommand{\insertdoubleimage}[8]{
            \begin{figure}[H]
                \centering
                % 第一个子图
                \begin{subfigure}[b]{0.48\textwidth}
                    \centering
                    \includegraphics[width=\textwidth]{#1}
                    \caption{#2}
                    \label{#3}
                \end{subfigure}
                \hfill % 水平间距
                % 第二个子图
                \begin{subfigure}[b]{0.48\textwidth}
                    \centering
                    \includegraphics[width=\textwidth]{#4}
                    \caption{#5}
                    \label{#6}
                \end{subfigure}
                \caption{#7}
                \label{#8}
            \end{figure}
        }

% 5. 自定义一个插入 TikZ 图像的命令
% 用法: \inserttikzpicture{<tikz code>}{<caption text>}{<label name>}
    \newcommand{\inserttikzpicture}[3]{
        \begin{figure}[H]
            \centering
            \begin{tikzpicture}[
                scale=1.2,
                font=\small
            ]
                % 参数 #1: 用户输入的 TikZ 绘图代码会在这里展开
                #1
            \end{tikzpicture}
            \caption{#2} % 参数 #2: 图片标题
            \label{#3}   % 参数 #3: 图片标签
        \end{figure}
    }

        